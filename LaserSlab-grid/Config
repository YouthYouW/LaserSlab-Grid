# Coniguration file for LaserSlab simulation
REQUIRES Driver
REQUIRES physics/Hydro

USESETUPVARS ThreeT

IF ThreeT
   REQUESTS physics/Diffuse/DiffuseMain/Unsplit

   REQUESTS physics/sourceTerms/Heatexchange/HeatexchangeMain/Spitzer
   REQUESTS physics/materialProperties/Conductivity/ConductivityMain/SpitzerHighZ
ENDIF

# This simulation requires specifying the species via the setup
# line. You must include the species setup variable:
#
# species=cham,targ
#
# An example of a setup line for this simulation is:
#
# ./setup -auto LaserSlab -2d +hdf5typeio \
#         -nxb=16 -nyb=16 +mtmmmt +laser species=cham,targ
# 

DATAFILES al-imx-002.cn4
DATAFILES al-imx-003.cn4
DATAFILES he-imx-005.cn4

##########################
#                        #
#   RUNTIME PARAMETERS   #
#                        #
##########################


D sim_initGeom Use a spherical target if sphere, default to slab
PARAMETER sim_initGeom STRING "slab" ["slab","sphere"]
                              
D sim_targetRadius The radius to use for the target
PARAMETER sim_targetRadius REAL 0.0050

D sim_targetHeight The height of the target off y-axis
PARAMETER sim_targetHeight REAL 0.0250

D sim_vacuumHeight The thickness of the vacuum region in front of the target
PARAMETER sim_vacuumHeight REAL 0.0200

# Target material defaults set for aluminum at room temperature:
D sim_rhoTarg Initial target density
PARAMETER sim_rhoTarg   REAL 2.7

D sim_teleTarg Initial target electron temperature
PARAMETER sim_teleTarg  REAL 290.11375

D sim_tionTarg Initial target ion temperature
PARAMETER sim_tionTarg  REAL 290.11375

D sim_tradTarg Initial target radiation temperature
PARAMETER sim_tradTarg  REAL 290.11375

D sim_zminTarg target minimum zbar allowed
PARAMETER sim_zminTarg  REAL 0.0

D sim_eosTarg chamber EOS type
PARAMETER sim_eosTarg   STRING "eos_tab" ["eos_tab","eos_gam"]

# Chamber material defaults set for Helium at pressure 1.6 mbar:
D sim_rhoCham Initial chamber density
PARAMETER sim_rhoCham   REAL 2.655e-07

D sim_teleCham Initial chamber electron temperature
PARAMETER sim_teleCham  REAL 290.11375

D sim_tionCham Initial chamber ion temperature
PARAMETER sim_tionCham  REAL 290.11375

D sim_tradCham Initial chamber radiation temperature
PARAMETER sim_tradCham  REAL 290.11375

D sim_eosCham chamber EOS type
PARAMETER sim_eosCham   STRING "eos_gam" ["eos_tab","eos_gam"]

# Additional directives for demoing Thomson Scattering diagnostics follow.
# To enable, add something like ThscDemo=True to to setup command line.

D lase_variable saves (density of) the irradiated energy from EnergyDeposition unit, cf. RP ed_irradVarName
VARIABLE lase TYPE: PER_VOLUME

USESETUPVARS ThscDemo
IF ThscDemo

   REQUIRES diagnostics/ThomsonScattering

#  No *essential* VARIABLE declarations follow, these are for Thomson Scattering tracing.

   D pwin_variable for debugging: density of Power In from Thomson probe laser, used for power measurement and renorming
   D pwia_variable for debugging: density of Power In, except where forbidden by critical density
   D pwi1_variable for debugging: density of Power In, attenuated by close-to-critical energy loss. Expensive computation.
   D pwi2_variable for debugging: density of Power In, attenuated by close-to-critical energy loss along both legs
   D pwde_variable for debugging: density of Power of light from the Thomson scattering region that gets detected
   D pwd1_variable for debugging: density of Power of light from the Thomson scattering region that gets detected, attenuated
   D pwd2_variable for debugging: density of Power of light from the Thomson scattering region that gets detected, (2 legs) attenuated

   VARIABLE pwin
   VARIABLE pwia
#   VARIABLE pwi1    # Uncommenting this makes ThomsonScattering MUCH slower!
   VARIABLE pwde
#   VARIABLE pwda
   VARIABLE pwd1
   VARIABLE pwi2
   VARIABLE pwd2

ENDIF

D sim_useRefineSpecialized
PARAMETER sim_useRefineSpecialized BOOLEAN FALSE

D criterion 
PARAMETER criterion INTEGER 0

D size
PARAMETER size INTEGER 0

D spec_1
PARAMETER spec_1 REAL 1.0

D spec_2 
PARAMETER spec_2 REAL 1.0

D spec_3
PARAMETER spec_3 REAL 1.0

D spec_4
PARAMETER spec_4 REAL 1.0

D spec_5
PARAMETER spec_5 REAL 1.0

D spec_6
PARAMETER spec_6 REAL 1.0

D spec_7
PARAMETER spec_7 REAL 1.0

D lref 
PARAMETER lref INTEGER 0

#############################################################
#                                                           #
#      CUSTOM PARAMETERS FOR GEOMETRIC AMR REFINEMENT       #
#                                                           #
#############################################################

# This switch enables our multi-region geometric refinement logic.
D sim_useGeometryRefinement
PARAMETER sim_useGeometryRefinement BOOLEAN FALSE

# This parameter tells the code how many refinement regions to read.
D sim_geom_refine_nregions
PARAMETER sim_geom_refine_nregions INTEGER 0

# --- Explicit definitions for up to 12 refinement regions ---

# --- Region 1 ---
D sim_geom_refine_shape_1
PARAMETER sim_geom_refine_shape_1 STRING "box" ["box","sphere"]
D sim_geom_refine_level_1
PARAMETER sim_geom_refine_level_1 INTEGER 0
D sim_geom_refine_center_x_1
PARAMETER sim_geom_refine_center_x_1 REAL 0.0
D sim_geom_refine_center_y_1
PARAMETER sim_geom_refine_center_y_1 REAL 0.0
D sim_geom_refine_center_z_1
PARAMETER sim_geom_refine_center_z_1 REAL 0.0
D sim_geom_refine_size_x_1
PARAMETER sim_geom_refine_size_x_1 REAL 0.0
D sim_geom_refine_size_y_1
PARAMETER sim_geom_refine_size_y_1 REAL 0.0
D sim_geom_refine_size_z_1
PARAMETER sim_geom_refine_size_z_1 REAL 0.0

# --- Region 2 ---
D sim_geom_refine_shape_2 
PARAMETER sim_geom_refine_shape_2 STRING "box" ["box","sphere"]
D sim_geom_refine_level_2
PARAMETER sim_geom_refine_level_2 INTEGER 0
D sim_geom_refine_center_x_2
PARAMETER sim_geom_refine_center_x_2 REAL 0.0
D sim_geom_refine_center_y_2
PARAMETER sim_geom_refine_center_y_2 REAL 0.0
D sim_geom_refine_center_z_2
PARAMETER sim_geom_refine_center_z_2 REAL 0.0
D sim_geom_refine_size_x_2
PARAMETER sim_geom_refine_size_x_2 REAL 0.0
D sim_geom_refine_size_y_2
PARAMETER sim_geom_refine_size_y_2 REAL 0.0
D sim_geom_refine_size_z_2
PARAMETER sim_geom_refine_size_z_2 REAL 0.0

# --- Region 3 ---
D sim_geom_refine_shape_3
PARAMETER sim_geom_refine_shape_3 STRING "box" ["box","sphere"]
D sim_geom_refine_level_3
PARAMETER sim_geom_refine_level_3 INTEGER 0
D sim_geom_refine_center_x_3
PARAMETER sim_geom_refine_center_x_3 REAL 0.0
D sim_geom_refine_center_y_3
PARAMETER sim_geom_refine_center_y_3 REAL 0.0
D sim_geom_refine_center_z_3
PARAMETER sim_geom_refine_center_z_3 REAL 0.0
D sim_geom_refine_size_x_3
PARAMETER sim_geom_refine_size_x_3 REAL 0.0
D sim_geom_refine_size_y_3
PARAMETER sim_geom_refine_size_y_3 REAL 0.0
D sim_geom_refine_size_z_3
PARAMETER sim_geom_refine_size_z_3 REAL 0.0

# --- Region 4 ---
D sim_geom_refine_shape_4
PARAMETER sim_geom_refine_shape_4 STRING "box" ["box","sphere"]
D sim_geom_refine_level_4
PARAMETER sim_geom_refine_level_4 INTEGER 0
D sim_geom_refine_center_x_4
PARAMETER sim_geom_refine_center_x_4 REAL 0.0
D sim_geom_refine_center_y_4
PARAMETER sim_geom_refine_center_y_4 REAL 0.0
D sim_geom_refine_center_z_4
PARAMETER sim_geom_refine_center_z_4 REAL 0.0
D sim_geom_refine_size_x_4
PARAMETER sim_geom_refine_size_x_4 REAL 0.0
D sim_geom_refine_size_y_4
PARAMETER sim_geom_refine_size_y_4 REAL 0.0
D sim_geom_refine_size_z_4
PARAMETER sim_geom_refine_size_z_4 REAL 0.0

# --- Region 5 ---
D sim_geom_refine_shape_5
PARAMETER sim_geom_refine_shape_5 STRING "box" ["box","sphere"]
D sim_geom_refine_level_5
PARAMETER sim_geom_refine_level_5 INTEGER 0
D sim_geom_refine_center_x_5
PARAMETER sim_geom_refine_center_x_5 REAL 0.0
D sim_geom_refine_center_y_5
PARAMETER sim_geom_refine_center_y_5 REAL 0.0
D sim_geom_refine_center_z_5
PARAMETER sim_geom_refine_center_z_5 REAL 0.0
D sim_geom_refine_size_x_5
PARAMETER sim_geom_refine_size_x_5 REAL 0.0
D sim_geom_refine_size_y_5
PARAMETER sim_geom_refine_size_y_5 REAL 0.0
D sim_geom_refine_size_z_5
PARAMETER sim_geom_refine_size_z_5 REAL 0.0

# --- Region 6 ---
D sim_geom_refine_shape_6
PARAMETER sim_geom_refine_shape_6 STRING "box" ["box","sphere"]
D sim_geom_refine_level_6
PARAMETER sim_geom_refine_level_6 INTEGER 0
D sim_geom_refine_center_x_6
PARAMETER sim_geom_refine_center_x_6 REAL 0.0
D sim_geom_refine_center_y_6
PARAMETER sim_geom_refine_center_y_6 REAL 0.0
D sim_geom_refine_center_z_6
PARAMETER sim_geom_refine_center_z_6 REAL 0.0
D sim_geom_refine_size_x_6
PARAMETER sim_geom_refine_size_x_6 REAL 0.0
D sim_geom_refine_size_y_6
PARAMETER sim_geom_refine_size_y_6 REAL 0.0
D sim_geom_refine_size_z_6
PARAMETER sim_geom_refine_size_z_6 REAL 0.0

# --- Region 7 ---
D sim_geom_refine_shape_7
PARAMETER sim_geom_refine_shape_7 STRING "box" ["box","sphere"]
D sim_geom_refine_level_7
PARAMETER sim_geom_refine_level_7 INTEGER 0
D sim_geom_refine_center_x_7
PARAMETER sim_geom_refine_center_x_7 REAL 0.0
D sim_geom_refine_center_y_7
PARAMETER sim_geom_refine_center_y_7 REAL 0.0
D sim_geom_refine_center_z_7
PARAMETER sim_geom_refine_center_z_7 REAL 0.0
D sim_geom_refine_size_x_7
PARAMETER sim_geom_refine_size_x_7 REAL 0.0
D sim_geom_refine_size_y_7
PARAMETER sim_geom_refine_size_y_7 REAL 0.0
D sim_geom_refine_size_z_7
PARAMETER sim_geom_refine_size_z_7 REAL 0.0

# --- Region 8 ---
D sim_geom_refine_shape_8
PARAMETER sim_geom_refine_shape_8 STRING "box" ["box","sphere"]
D sim_geom_refine_level_8
PARAMETER sim_geom_refine_level_8 INTEGER 0
D sim_geom_refine_center_x_8
PARAMETER sim_geom_refine_center_x_8 REAL 0.0
D sim_geom_refine_center_y_8
PARAMETER sim_geom_refine_center_y_8 REAL 0.0
D sim_geom_refine_center_z_8
PARAMETER sim_geom_refine_center_z_8 REAL 0.0
D sim_geom_refine_size_x_8
PARAMETER sim_geom_refine_size_x_8 REAL 0.0
D sim_geom_refine_size_y_8
PARAMETER sim_geom_refine_size_y_8 REAL 0.0
D sim_geom_refine_size_z_8
PARAMETER sim_geom_refine_size_z_8 REAL 0.0

# --- Region 9 ---
D sim_geom_refine_shape_9
PARAMETER sim_geom_refine_shape_9 STRING "box" ["box","sphere"]
D sim_geom_refine_level_9
PARAMETER sim_geom_refine_level_9 INTEGER 0
D sim_geom_refine_center_x_9
PARAMETER sim_geom_refine_center_x_9 REAL 0.0
D sim_geom_refine_center_y_9
PARAMETER sim_geom_refine_center_y_9 REAL 0.0
D sim_geom_refine_center_z_9
PARAMETER sim_geom_refine_center_z_9 REAL 0.0
D sim_geom_refine_size_x_9
PARAMETER sim_geom_refine_size_x_9 REAL 0.0
D sim_geom_refine_size_y_9
PARAMETER sim_geom_refine_size_y_9 REAL 0.0
D sim_geom_refine_size_z_9
PARAMETER sim_geom_refine_size_z_9 REAL 0.0

# --- Region 10 ---
D sim_geom_refine_shape_10
PARAMETER sim_geom_refine_shape_10 STRING "box" ["box","sphere"]
D sim_geom_refine_level_10
PARAMETER sim_geom_refine_level_10 INTEGER 0
D sim_geom_refine_center_x_10
PARAMETER sim_geom_refine_center_x_10 REAL 0.0
D sim_geom_refine_center_y_10
PARAMETER sim_geom_refine_center_y_10 REAL 0.0
D sim_geom_refine_center_z_10
PARAMETER sim_geom_refine_center_z_10 REAL 0.0
D sim_geom_refine_size_x_10
PARAMETER sim_geom_refine_size_x_10 REAL 0.0
D sim_geom_refine_size_y_10
PARAMETER sim_geom_refine_size_y_10 REAL 0.0
D sim_geom_refine_size_z_10
PARAMETER sim_geom_refine_size_z_10 REAL 0.0

# --- Region 11 ---
D sim_geom_refine_shape_11
PARAMETER sim_geom_refine_shape_11 STRING "box" ["box","sphere"]
D sim_geom_refine_level_11
PARAMETER sim_geom_refine_level_11 INTEGER 0
D sim_geom_refine_center_x_11
PARAMETER sim_geom_refine_center_x_11 REAL 0.0
D sim_geom_refine_center_y_11
PARAMETER sim_geom_refine_center_y_11 REAL 0.0
D sim_geom_refine_center_z_11
PARAMETER sim_geom_refine_center_z_11 REAL 0.0
D sim_geom_refine_size_x_11
PARAMETER sim_geom_refine_size_x_11 REAL 0.0
D sim_geom_refine_size_y_11
PARAMETER sim_geom_refine_size_y_11 REAL 0.0
D sim_geom_refine_size_z_11
PARAMETER sim_geom_refine_size_z_11 REAL 0.0

# --- Region 12 ---
D sim_geom_refine_shape_12
PARAMETER sim_geom_refine_shape_12 STRING "box" ["box","sphere"]
D sim_geom_refine_level_12
PARAMETER sim_geom_refine_level_12 INTEGER 0
D sim_geom_refine_center_x_12
PARAMETER sim_geom_refine_center_x_12 REAL 0.0
D sim_geom_refine_center_y_12
PARAMETER sim_geom_refine_center_y_12 REAL 0.0
D sim_geom_refine_center_z_12
PARAMETER sim_geom_refine_center_z_12 REAL 0.0
D sim_geom_refine_size_x_12
PARAMETER sim_geom_refine_size_x_12 REAL 0.0
D sim_geom_refine_size_y_12
PARAMETER sim_geom_refine_size_y_12 REAL 0.0
D sim_geom_refine_size_z_12
PARAMETER sim_geom_refine_size_z_12 REAL 0.0